<% include ../partials/header %>
<div class="container">
  <h1 class="text-center">Edit <%= campground.name %></h1>

  <!-- definiamo un tag row perchÃ© vogliamo USARE IL GRID SYSTEM IN MODO CHE IL FORM VENGA MOSTRATO
        OCCUPANDO TUTTE LE 12 COLONNE DELLA GRIGLIA E QUINDI OCCUPANDO TUTTA LA LARGHEZZA DELLO SCHERMO ANCHE
        QUANDO E' VISUALIZZATO SU DISPOSTIVI MOBILI IN QUESTO MODO E' RESPONSIVO
    -->
  <div class="row form-row">
    <!-- USIAMO method-override PER MODIFICARE IL METODO DELLA RICHIESTA DA POST A PUT -->
    <form
      action="/campgrounds/<%= campground._id %>?_method=PUT"
      method="POST"
      enctype="multipart/form-data"
    >
      <!-- definiamo ogni campo del form (compreso il bottone )
        dentro un div con classe form-group PER DARGLI UNA SPAZIATURA 
        E DISTANZIARLO DAL PRECEDENTE E DAL SUCCESSIVO -->
      <div class="form-group">
        <input
          class="form-control"
          type="text"
          name="campground[name]"
          placeholder="name"
          value="<% if(name){ %><%= name %><% } else { %><%= campground.name %><% } %>"
        />
      </div>
      <%# the user can upload new images %>
      <div class="form-group">
        <input
          class="form-control"
          id="imgInput"
          type="file"
          name="images"
          accept="image/*"
          multiple
        />
      </div>
      <div class="form-group">
        <% campground.images.forEach(function(img, i){ %>
        <img
          src="<%= img.url %>"
          alt="image of <%= campground.name %>"
          class="image"
        />
        <input type="checkbox" class="deleteImg" name="deleteImages[]"
        value="<%= img.public_id %>" <% if(delImgs.indexOf(img.public_id)!==-1){
        %>checked<% } %> /> <% }) %>
      </div>
      <div class="form-group">
        <input
          class="form-control"
          type="number"
          name="campground[price]"
          placeholder="price"
          value="<% if(price){ %><%= price %><% } else { %><%= campground.price %><% } %>"
          min="0.01"
          step="0.01"
        />
      </div>
      <div class="form-group">
        <textarea
          class="form-control"
          name="campground[description]"
          id=""
          cols="30"
          rows="10"
          placeholder="description ... "
        >
<% if(description){ %><%= description %><% } else { %><%= campground.description %><% } %></textarea
        >
      </div>
      <div class="form-group">
        <button class="btn btn-lg btn-warning btn-block" type="submit">
          Edit
        </button>
      </div>
    </form>

    <a href="/campgrounds">go back</a>
  </div>
</div>

<script src="/javascript/campgroundEdit.js"></script>

<% include ../partials/footer %>
